<!DOCTYPE html>
<html>
  <head>
    <title>Google Content API Example</title>
    <meta charset="utf-8" />
  </head>
  <body>
    <h1>Google Content API Example</h1>
    <div id="content"></div>

    <script type="text/javascript">
      // Your credentials
      const CLIENT_ID = "1071167725958-9edrhuv5psrtuidp4d0582kcnupaukjl.apps.googleusercontent.com";
      const API_KEY = "AIzaSyB6KdfrJaEzgxmarfitK6Rll4qyN3B7FeE";
      const MERCHANT_ID = "5390490385";

      // Load the API client and auth2 library
      function handleClientLoad() {
        gapi.load('client:auth2', initClient);
      }

      // Initialize the API client library and set up sign-in state listeners
      function initClient() {
        gapi.client.init({
          apiKey: API_KEY,
          clientId: CLIENT_ID,
          scope: 'https://www.googleapis.com/auth/content',
          discoveryDocs: ["https://content.googleapis.com/$discovery/rest?version=v2"]
        }).then(function () {
          gapi.auth2.getAuthInstance().signIn().then(makeApiCall);
        });
      }

      // Make an API call to retrieve products
      function makeApiCall() {
        gapi.client.content.products.list({
          merchantId: MERCHANT_ID
        }).then(function(response) {
          var products = response.result.resources;
          var contentDiv = document.getElementById('content');
          if (products && products.length > 0) {
            products.forEach(function(product) {
              var p = document.createElement('p');
              p.appendChild(document.createTextNode(Product ID: ${product.id}, Title: ${product.title}));
              contentDiv.appendChild(p);
            });
          } else {
            contentDiv.appendChild(document.createTextNode('No products found.'));
          }
        }, function(reason) {
          console.log('Error: ' + reason.result.error.message);
        });
      }
    </script>
    <script async defer src="https://apis.google.com/js/api.js" 
      onload="this.onload=function(){};handleClientLoad()" 
      onreadystatechange="if (this.readyState === 'complete') this.onload()">
    </script>
  </body>
</html>